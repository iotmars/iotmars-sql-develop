
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.9">
    
    
      
        <title>How to use - IoTMARS-SQL-Develop使用文档</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.20d9efc8.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.08040f6c.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#how-to-use" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href=".." title="IoTMARS-SQL-Develop使用文档" class="md-header__button md-logo" aria-label="IoTMARS-SQL-Develop使用文档" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            IoTMARS-SQL-Develop使用文档
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              How to use
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/iotmars/iotmars-sql-develop" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    IoTMARS-Sql-Develop
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="IoTMARS-SQL-Develop使用文档" class="md-nav__button md-logo" aria-label="IoTMARS-SQL-Develop使用文档" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    IoTMARS-SQL-Develop使用文档
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/iotmars/iotmars-sql-develop" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    IoTMARS-Sql-Develop
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Getting started
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../install/" class="md-nav__link">
        Install
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          How to use
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        How to use
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    提供的接口
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-sql" class="md-nav__link">
    1. 手写sql然后查询
  </a>
  
    <nav class="md-nav" aria-label="1. 手写sql然后查询">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11" class="md-nav__link">
    1.1请求路径
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12" class="md-nav__link">
    1.2请求说明
  </a>
  
    <nav class="md-nav" aria-label="1.2请求说明">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    示例1:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    示例2:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13" class="md-nav__link">
    1.3高级模块
  </a>
  
    <nav class="md-nav" aria-label="1.3高级模块">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#131-handler" class="md-nav__link">
    1.3.1 handler的编写。
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#132-route" class="md-nav__link">
    1.3.2 route(路由)的使用
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2sql" class="md-nav__link">
    2.自动生成sql 的单表查询
  </a>
  
    <nav class="md-nav" aria-label="2.自动生成sql 的单表查询">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21" class="md-nav__link">
    2.1 请求路径
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22" class="md-nav__link">
    2.2 请求说明
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-wherehaving" class="md-nav__link">
    2.3 where和having语句的语法
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3sql" class="md-nav__link">
    3.自动生成sql 的多表查询
  </a>
  
    <nav class="md-nav" aria-label="3.自动生成sql 的多表查询">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31" class="md-nav__link">
    3.1请求路径
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32" class="md-nav__link">
    3.2请求说明
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    提供的接口
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-sql" class="md-nav__link">
    1. 手写sql然后查询
  </a>
  
    <nav class="md-nav" aria-label="1. 手写sql然后查询">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11" class="md-nav__link">
    1.1请求路径
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12" class="md-nav__link">
    1.2请求说明
  </a>
  
    <nav class="md-nav" aria-label="1.2请求说明">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    示例1:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    示例2:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13" class="md-nav__link">
    1.3高级模块
  </a>
  
    <nav class="md-nav" aria-label="1.3高级模块">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#131-handler" class="md-nav__link">
    1.3.1 handler的编写。
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#132-route" class="md-nav__link">
    1.3.2 route(路由)的使用
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2sql" class="md-nav__link">
    2.自动生成sql 的单表查询
  </a>
  
    <nav class="md-nav" aria-label="2.自动生成sql 的单表查询">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21" class="md-nav__link">
    2.1 请求路径
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22" class="md-nav__link">
    2.2 请求说明
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-wherehaving" class="md-nav__link">
    2.3 where和having语句的语法
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3sql" class="md-nav__link">
    3.自动生成sql 的多表查询
  </a>
  
    <nav class="md-nav" aria-label="3.自动生成sql 的多表查询">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31" class="md-nav__link">
    3.1请求路径
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32" class="md-nav__link">
    3.2请求说明
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/iotmars/iotmars-sql-develop/edit/master/docs/use.md" title="编辑此页" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="how-to-use">How to use</h1>
<h3 id="_1">提供的接口</h3>
<p>请您打开源码，找到com.marssenger.common.sql.controller.StandardController。</p>
<p>您可以看出本项目提供了3个接口</p>
<pre><code class="language-java">/common/standard/sql/list            需要有事先写好的sql才能执行的接口                    
</code></pre>
<pre><code class="language-java">/common/standard/sql/selectOneTable  单表查询接口,无需事先写好sql   
</code></pre>
<pre><code class="language-java">/common/standard/sql/commonSelect    多表join查询接口,无需事先写好sql 
</code></pre>
<h3 id="1-sql">1. 手写sql然后查询</h3>
<h4 id="11">1.1请求路径</h4>
<pre><code>/common/standard/sql/list 
</code></pre>
<h4 id="12">1.2请求说明</h4>
<p>GET请求。</p>
<p>根据sqlCode或者seriesCode来查询到cc_base_sql的一个或者多个sql，然后按照顺序执行它，返回具体的结果。</p>
<p>核心是收集从url中获取的参数后，调用如下方法：</p>
<pre><code class="language-java">com.marssenger.common.sql.utils.ControllerUtil#getResult(StandardQueryObject standardQueryObject) throws NoSqlExistsException, BeanNotFoundException, ClassNotFoundException
</code></pre>
<p>StandardQueryObject封装了如下属性。</p>
<table>
<thead>
<tr>
<th align="left">字段名</th>
<th>字段意义</th>
<th>是否可空</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">sqlCode</td>
<td>cc_base_sql表主键sql_code，用来唯一对应一个sql</td>
<td>Y</td>
</tr>
<tr>
<td align="left">seriesCode</td>
<td>cc_base_sql_series表的series_code字段，对应cc_base_sql的多个sql_code</td>
<td>Y</td>
</tr>
<tr>
<td align="left">params</td>
<td>params自动封装了从url中所有的参数，mybaits框架会使用这些参数</td>
<td>Y</td>
</tr>
<tr>
<td align="left">handler</td>
<td>SqlExecuteHandler的实现类的名字，是spring中该实现类的bean的名字。用来自定义sql语句查询前后怎么处理环境变量和查询结果</td>
<td>Y</td>
</tr>
<tr>
<td align="left">handlerParams</td>
<td>handler类会使用的参数，多个参数请用字符串隔开</td>
<td>Y</td>
</tr>
<tr>
<td align="left">resultType</td>
<td>返回结果的格式，有如下四个数值rawlist、multilist、multiSumInfoAndOneList、multiListAndOneList，其中rawlist是原始结果，multilist返回的是多个列表，列表位置相同，multiSumInfoAndOneList是一个列表外加上多个统计值，multiListAndOneList是一个列表再加上不同的列表，位置不同.</td>
<td>Y</td>
</tr>
<tr>
<td align="left">route</td>
<td>路由，也可以称之为一组方法的组合，参阅1.3.2 route(路由)的使用</td>
<td></td>
</tr>
</tbody>
</table>
<p>StandardQueryObject的其余属性均为框架内部使用属性。</p>
<h6 id="1">示例1:</h6>
<p>在数据库里执行如下sql</p>
<pre><code class="language-sql">INSERT INTO `compass_dev`.`cc_base_sql` (`sql_code`, `sql_type`, `sql`, `total_sql`, `sql_result_name`, `total_sql_result_name`, `jexl`, `map`, `order_no`, `remark`) VALUES ('exampleSql', 'select', 'select  count(1) con from cc_base_sql', NULL, NULL, NULL, NULL, NULL, NULL, '用来测试的sql');
</code></pre>
<p>这条sql向数据库里插入了一条数据，主键sql_code为exampleSql，对应的sql语句为: select  count(1) con from cc_base_sql。</p>
<p>运行项目，在浏览器里输入如下地址：</p>
<p>http://localhost:8080/common/standard/sql/list?sqlCode=exampleSql</p>
<p>会得到如下的返回结果:</p>
<p>{
    "records": [
        {
            "con": 45
        }
    ]
}</p>
<p>这里面con的具体数值取决于cc_base_sql里到底有多少数据。</p>
<p>上面的请求根据sqlCode=exampleSql的条件，在cc_base_sql里查到了一条sql，sql具体的数值为：select  count(1) con from cc_base_sql，然后调用mybaits框架，执行该sql。</p>
<h6 id="2">示例2:</h6>
<pre><code>INSERT INTO `compass_dev`.`cc_base_sql` (`sql_code`, `sql_type`, `sql`, `total_sql`, `sql_result_name`, `total_sql_result_name`, `jexl`, `map`, `order_no`, `remark`) VALUES ('exampleSql2', 'select', 'select  * from cc_base_sql where sql_code=#{pk}', NULL, NULL, NULL, NULL, NULL, NULL, '用来测试的sql2');
</code></pre>
<p>这条sql向数据库里插入了一条数据，主键sql_code为exampleSql，对应的sql语句为: select  count(1) con from cc_base_sql。</p>
<p>运行项目，在浏览器里输入如下地址：</p>
<p>http://localhost:8080/common/standard/sql/list?sqlCode=exampleSql2&amp;pk=exampleSql2</p>
<p>会得到如下的返回结果:</p>
<p>{
    "records": [
        {
            "sqlType": "select",
            "sqlCode": "exampleSql2",
            "remark": "用来测试的sql2",
            "sql": "select  * from cc_base_sql where sql_code=#{pk}"
        }
    ]
}</p>
<p>在这里，将一行记录返回了过来，你可以猜出#{pk}这种写法是mybaits的独有写法，因此您可以在sql中任意使用标签，如<if/>,<foreach/>等。pk的数值是从params这个Map<String,Object>中获取的，这是mybatis运行的上下文，这个参数会总动收集url中的所有参数。</p>
<p>当您需要执行一批查询而不是一个查询时，您可以使用seriesCode代替sqlCode。在  cc_base_sql_series表的series_code字段，对应cc_base_sql的多个sql_code，也就是对应多条sql。</p>
<p>在您的数据库里执行如下sql:</p>
<pre><code class="language-sql">INSERT INTO `cc_base_sql` (`sql_code`, `sql_type`, `sql`, `total_sql`, `sql_result_name`, `total_sql_result_name`, `jexl`, `map`, `order_no`, `remark`) VALUES ('exampleCodeA', 'select', 'select 1 result1', NULL, NULL, NULL, NULL, NULL, NULL, NULL);
INSERT INTO `compass_dev`.`cc_base_sql` (`sql_code`, `sql_type`, `sql`, `total_sql`, `sql_result_name`, `total_sql_result_name`, `jexl`, `map`, `order_no`, `remark`) VALUES ('exampleCodeB', 'select', 'select 2 result2', NULL, NULL, NULL, NULL, NULL, NULL, NULL);
INSERT INTO `cc_base_sql_series` (`id`, `series_code`, `sql_code`, `identifier`, `order_no`) VALUES (null, 'testSeries', 'exampleCodeA', 'exampleCodeA', 1);
INSERT INTO `cc_base_sql_series` (`id`, `series_code`, `sql_code`, `identifier`, `order_no`) VALUES (null, 'testSeries', 'exampleCodeB', 'exampleCodeB', 2);
</code></pre>
<p>上述sql先在cc_base_sql表里插入两条sql记录，主键为exampleCodeA、exampleCodeB，对应的两条sql分别为select 1 result1 和 select 2 result2</p>
<p>然后在cc_base_sql_series也插入了两条记录，指定exampleCodeA、exampleCodeB这两条sql对应的series_code为testSeries。</p>
<p>运行项目，在浏览器输入：</p>
<p>http://localhost:8080/common/standard/sql/list?seriesCode=testSeries&amp;resultType=multiListAndOneList</p>
<p>返回结果：</p>
<p>{
    "records": [
        {
            "result1": 1
        }
    ],
    "result2": 2
}</p>
<p>您看出来了吧，result1和result2都返回了，两条sql都执行了。</p>
<h4 id="13">1.3高级模块</h4>
<h5 id="131-handler">1.3.1 handler的编写。</h5>
<p>handler指的是com.marssenger.common.sql.handler.SqlExecuteHandler这个类的实现类，您可以通过实现这个类来定制您的模板，里面有这么几个方法。</p>
<pre><code>/**
 * 设置环境的方法
 *
 * @param env
 */
void setEnv(Map&lt;String, Object&gt; env);

/**
 * 获取环境的方法
 *
 * @return
 */
Map&lt;String, Object&gt; getEnv();


/**
 * 获取handler的参数
 *
 * @return
 */
String getHandlerParams();

/**
 * 设置handler的参数
 *
 * @param handlerParams
 */
void setHandlerParams(String handlerParams);

/**
 * 初始情况下设置环境变量
 */
void initEnv();


/**
 * 初始化sql列表
 * @param list
 */
List&lt;SqlObject&gt; initSqlList(List&lt;SqlObject&gt; list);


/**
 * 返回缓存的结果
 *
 * @return 返回的结果
 */
Object getCacheResult();

/**
 * 每次执行sql前必然执行的，设置环境变量
 *
 * @param sqlObject sql参数
 */
void setEnvBeforeExecuteEachSql(SqlObject sqlObject);

/**
 * 每次执行sql后必然执行的
 *
 * @param sqlObject sql参数
 * @param result    本次执行的结果
 */
public void setEnvAfterExecuteEachSql(SqlObject sqlObject, Result result);

/**
 * 对最终执行的sql进行处理
 *
 * @param standardQueryObject 初始的查询参数
 * @param sqlObjects          sql列表
 * @param resultMap           对象列表
 * @return 最终的返回结果
 */
public Object setFinalResult(StandardQueryObject standardQueryObject, List&lt;SqlObject&gt; sqlObjects, Map&lt;String, Result&gt; resultMap);
</code></pre>
<p>对应于sql 的执行周期</p>
<table>
<thead>
<tr>
<th>序号</th>
<th>生命周期</th>
<th>注释</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>setEnv</td>
<td>初始化mybatis的运行环境Map<String,Object></td>
</tr>
<tr>
<td>2</td>
<td>setHandlerParams</td>
<td>将页面传来的handlerParams字符串设置到该类中</td>
</tr>
<tr>
<td>3</td>
<td>initEnv</td>
<td>再次设置您的运行环境，这里您可以调用getEnv()获取当前环境，然后再度加入您的参数。</td>
</tr>
<tr>
<td>4</td>
<td>initSqlList</td>
<td>对sql列表进行设置，比如您可list.add一个新的SqlObject</td>
</tr>
<tr>
<td>5</td>
<td>getCacheResult</td>
<td>如果您需要读取缓存，可以使用该方法，该方法返回的结果如果非空，便是最终结果。</td>
</tr>
<tr>
<td>6</td>
<td>setEnvBeforeExecuteEachSql</td>
<td>List<SqlObject> list中的sql每调用一次前，便会调用该方法，该方法可以对mybatis当次执行所使用的参数进行调整，比如您可以调用getEnv()获取当前的执行环境，这是一个Map<String,Object>，你可以随意更改里面的key和value</td>
</tr>
<tr>
<td>7</td>
<td>setEnvAfterExecuteEachSql</td>
<td>List<SqlObject> list中的sql每调用一次后，便会调用该方法，该方法可以对该sql的执行结果进行处理。</td>
</tr>
<tr>
<td>8</td>
<td>setFinalResult</td>
<td>设置最终结果，resultMap有list中所有sql语句的执行结果，您可以汇总这些结果得到新的一个结果</td>
</tr>
</tbody>
</table>
<p>本系统默认的handler是com.marssenger.common.sql.executor.StandardSqlExecutor，当您传入您的handler时，本框架会使用您的handler。</p>
<p>一个简单的handler示例如下:</p>
<pre><code class="language-java">package com.marsenger.demo;


import com.marssenger.common.sql.handler.StandardSqlExecuteHandler;
import org.springframework.stereotype.Component;

import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import java.util.Map;
import java.util.Set;

@Component(&quot;testHandler&quot;)
public class TestHandler extends StandardSqlExecuteHandler {

    /**
     * 初始化环境，当您的handlerParams包含setDateRange这个参数时，为您设置当前月份的开始时间和当前月份的结束时间，您可以在使用mybatis的#{startDay}、#{endDay}符号调用
     */
    @Override
    public void initEnv() {
        Map&lt;String, Object&gt; env = getEnv();
        String handlerParams = getHandlerParams();
        Set&lt;String&gt; handlerParamsSet = getHandlerParamsSet(handlerParams);
        if (handlerParamsSet.contains(&quot;setDateRange&quot;)) {
            Calendar calendar = Calendar.getInstance();
            //获取当月第一天
            SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM&quot;);
            String yearMonth = sdf.format(new Date());
            env.put(&quot;startDay&quot;, yearMonth + &quot;-&quot; + &quot;01&quot;);
            //获取当月最后一天
            int year = calendar.get(Calendar.YEAR);
            int month = calendar.get(Calendar.MONTH) + 1;
            env.put(&quot;endDay&quot;, yearMonth + &quot;-&quot; + getDays(year, month));
        }
    }

    /**
     * 获取当前月份有多少天，可能28、29、30、31天
     *
     * @param year
     * @param month
     * @return
     */
    public static int getDays(int year, int month) {
        int days = 0;
        if (month != 2) {
            switch (month) {
                case 1:
                case 3:
                case 5:
                case 7:
                case 8:
                case 10:
                case 12:
                    days = 31;
                    break;
                case 4:
                case 6:
                case 9:
                case 11:
                    days = 30;

            }
        } else {
            // 闰年
            if (year % 4 == 0 &amp;&amp; year % 100 != 0 || year % 400 == 0) {
                days = 29;
            } else {
                days = 28;
            }
        }
        return days;
    }


}
</code></pre>
<p>上面的handler继承了StandardSqlExecuteHandler，重新了initEnv()方法，在执行sql查询前，为您设置了两个参数startDay和endDay，分别是当月的第一天和最后一天，您可以在您的sql里使用#{startDay}、#{endDay}引用这些变量。</p>
<p>在数据库里执行如下sql：</p>
<pre><code class="language-sql">INSERT INTO `compass_dev`.`cc_base_sql` (`sql_code`, `sql_type`, `sql`, `total_sql`, `sql_result_name`, `total_sql_result_name`, `jexl`, `map`, `order_no`, `remark`) VALUES ('exampleSql3', 'select', 'select #{startDay} startDay ,#{endDay} endDay', NULL, NULL, NULL, NULL, NULL, NULL, NULL);
</code></pre>
<p>这条sql向数据库里插入了一条数据，主键sql_code为exampleSql3，对应的sql语句为: select #{startDay} startDay ,#{endDay} endDay。您可以看出，这里#{startDay}、#{endDay}是mybatis的写法。</p>
<p>运行项目，在浏览器输入:</p>
<p>http://localhost:8080/common/standard/sql/list?sqlCode=exampleSql3&amp;handler=testHandler&amp;handlerParams=setDateRange</p>
<p>这里指定的handler=testHandler，对应的是代码的@Component("testHandler")，这个注解说明您的handler是一个spring的bean，名字叫做testHandler。框架汇总spring的bean工厂中得到这个bean，然后使用您的bean完成对数据库的查询。</p>
<p>返回结果为:</p>
<p>{
    "records": [
        {
            "startDay": "2022-11-01",
            "endDay": "2022-11-30"
        }
    ]
}</p>
<h5 id="132-route">1.3.2 route(路由)的使用</h5>
<p>当您定制模板时，您可能追求代码的简洁，不想让不同需求代码分割开（至少要分割成不同的方法），您可以继承com.marssenger.common.sql.handler.StandardSqlExecuteDispatcherHandler类，然后传递一个route参数，来指定您需要访问的方法。</p>
<p>举个例子，您的项目有如下的handler</p>
<pre><code class="language-java">package com.marsenger.demo;


import com.marssenger.common.sql.annotation.Route;
import com.marssenger.common.sql.handler.StandardSqlExecuteDispatcherHandler;
import lombok.extern.slf4j.Slf4j;
import org.springframework.stereotype.Component;

/**
 * @author Administrator
 */
@Slf4j
@Route(route = &quot;r1&quot;, source = &quot;getCacheResult&quot;, target = &quot;r1GetCacheResult&quot;)
@Route(route = &quot;r1&quot;, source = &quot;initEnv&quot;, target = &quot;r1InitEnv&quot;)
@Route(route = &quot;r2&quot;, source = &quot;getCacheResult&quot;, target = &quot;r2GetCacheResult&quot;)
@Route(route = &quot;r2&quot;, source = &quot;initEnv&quot;, target = &quot;r2InitEnv&quot;)
@Component(&quot;myDispatcherHandler&quot;)
public class MyDispatcherHandler extends StandardSqlExecuteDispatcherHandler {
    public Object r1GetCacheResult() {
        log.info(&quot;enter myGetCacheResult1&quot;);
        return null;
    }

    public void r1InitEnv() {
        log.info(&quot;enter myInitEnv1&quot;);
        getEnv().put(&quot;pageSize&quot;, &quot;1&quot;);
    }

    public Object r2GetCacheResult() {
        log.info(&quot;enter myGetCacheResult2&quot;);
        return null;
    }

    public void r2InitEnv() {
        log.info(&quot;enter myInitEnv2&quot;);
        getEnv().put(&quot;pageSize&quot;, &quot;2&quot;);
    }

}

</code></pre>
<p>这个handler使用@Route指定了两条路由，r1和r2。路由r1将标准生命周期的getCacheResult方法映射为r1GetCacheResult方法，将标准生命周期的initEnv方法映射为r1InitEnv方法。路由r2将标准生命周期的getCacheResult方法映射为r2GetCacheResult方法，将标准生命周期的initEnv方法映射为r2InitEnv方法。也就是您的参数route=r1时，会调用r1GetCacheResult、r1InitEnv方法。您的参数route=r2时，框架会调用r2GetCacheResult、r2InitEnv方法。当您不传route参数时，会调用默认的getCacheResult、initEnv方法。</p>
<p>r1InitEnv将pageSize设置为1，r2InitEnv将pageSize设置为2</p>
<p>这种路由的方式，实现了不同需求在方法层面上的隔离。您可以使用一个模板实现不同的需求，达到了复用的目的。</p>
<p>在您的数据库执行如下sql:</p>
<pre><code class="language-sql">INSERT INTO `compass_dev`.`cc_base_sql` (`sql_code`, `sql_type`, `sql`, `total_sql`, `sql_result_name`, `total_sql_result_name`, `jexl`, `map`, `order_no`, `remark`) VALUES ('exampleSql4', 'select', 'select  ${pageSize} pageSize', NULL, NULL, NULL, NULL, NULL, NULL, NULL);

</code></pre>
<p>这条sql向数据库里插入了一条数据，主键sql_code为exampleSql4，对应的sql语句为: select  ${pageSize} pageSize。</p>
<p>运行项目（sql-devlop-demo或者您自己的项目，您自己的项目的话，要复制这个类，修改包名）。</p>
<p>在浏览器里输入：</p>
<p>http://localhost:8080/common/standard/sql/list?sqlCode=exampleSql4&amp;route=r1&amp;handler=myDispatcherHandler</p>
<p>在这里，指定了route=r1，使用的bean的名字是myDispatcherHandler</p>
<p>返回结果为：</p>
<p>{
    "records": [
        {
            "pageSize": 1
        }
    ]
}</p>
<p>控制台打印：</p>
<p>2022-11-11 16:14:23.196  INFO 1328 --- [nio-8080-exec-1] com.marsenger.demo.MyDispatcherHandler   : enter myInitEnv1
2022-11-11 16:14:23.196  INFO 1328 --- [nio-8080-exec-1] com.marsenger.demo.MyDispatcherHandler   : enter myGetCacheResult1</p>
<p>在浏览器里输入：</p>
<p>http://localhost:8080/common/standard/sql/list?sqlCode=exampleSql4&amp;route=r2&amp;handler=myDispatcherHandler</p>
<p>在这里，指定了route=r2，使用的bean的名字是myDispatcherHandler</p>
<p>返回结果为：</p>
<p>{
    "records": [
        {
            "pageSize": 2
        }
    ]
}</p>
<p>控制台打印：</p>
<p>2022-11-11 16:16:43.540  INFO 1328 --- [nio-8080-exec-6] com.marsenger.demo.MyDispatcherHandler   : enter myInitEnv2
2022-11-11 16:16:43.540  INFO 1328 --- [nio-8080-exec-6] com.marsenger.demo.MyDispatcherHandler   : enter myGetCacheResult2</p>
<p>如上，您可以看出，当您在url中指定不同的route时，会调用不同的方法，从而实现了需求在方法层面上的隔离，修改一个需求的代码时，不会影响到另外一个。</p>
<h3 id="2sql">2.自动生成sql 的单表查询</h3>
<h4 id="21">2.1 请求路径</h4>
<pre><code>/common/standard/sql/selectOneTable
</code></pre>
<h4 id="22">2.2 请求说明</h4>
<p>GET请求</p>
<p>sql中<strong>select</strong>语句的结构为：</p>
<pre><code class="language-sql">SELECT select_list
FROM table_name
[ WHERE search_condition]
[ GROUP BY group_by_expression]
[ HAVING search_condition]
[ ORDER BY order_expression [ ASC|DESC ] ]
</code></pre>
<p>基于这个结构，框架定义了一项基于url的数据库查询接口</p>
<pre><code>/common/standard/sql/selectOneTable?select=...&amp;from=...&amp;where=...&amp;groupBy=...&amp;having=...&amp;orderBy=...&amp;fieldName1=fieldValue1&amp;fieldName2=fieldValue2
</code></pre>
<p>其中sql语句的关键字select、from、where、group by、having、order by 都以驼峰的格式嵌入到了url中，您指定了这些，框架会自动为您拼接sql，然后执行返回给您结果。</p>
<p>各个关键字的说明:</p>
<table>
<thead>
<tr>
<th>关键字</th>
<th>解释</th>
<th>示例</th>
<th>是否可空</th>
</tr>
</thead>
<tbody>
<tr>
<td>select</td>
<td>对应sql语句里的select,这里要指定一个字段列表，要查哪些字段，多个字段用英文逗号分隔。可以省略，如果省略代表查询全部字段。</td>
<td>select=sql_code,sql_type,<code>sql</code></td>
<td>Y</td>
</tr>
<tr>
<td>from</td>
<td>对应sql语句里的from,这里要指定一个表。</td>
<td>from=cc_base_sql</td>
<td>N</td>
</tr>
<tr>
<td>where</td>
<td>对应sql语句里的where,判断条件，也就是sql里面鱼的条件，可以有多个where条件，分别是where1,where2,where3...,这些条件都要以where开头。</td>
<td>where0=sql_code,eq,exampleSql4</td>
<td>Y</td>
</tr>
<tr>
<td>groupBy</td>
<td>对应sql语句里的group by,配合聚合函数(function)使用，多个字段用英文逗号分隔。</td>
<td>groupBy=sql_type</td>
<td>Y</td>
</tr>
<tr>
<td>having</td>
<td>对应sql语句里的having,这里指定的是过滤条件，如where一样，可以有多个having条件，如having1,having2,having3...这些条件都要以having开头。</td>
<td>having1=sql_type,eq,select</td>
<td>Y</td>
</tr>
<tr>
<td>orderBy</td>
<td>对应sql语句里的order by,指定查询结果的排序。可以有多个orderBy条件，如orderBy1,orderBy2,orderBy3...这些条件都要以orderBy开头。</td>
<td>orderBy1=sql_code,desc</td>
<td>Y</td>
</tr>
<tr>
<td>fieldName</td>
<td>和其他的关键字不同，fieldName是您要查询的表的具体的字段，fieldValue是该字段对应的值，描述了一种特殊的where条件，也就是等值条件。</td>
<td>sql_code=exampleSql4;等价于where0=sql_code,eq,exampleSql4</td>
<td>Y</td>
</tr>
</tbody>
</table>
<p>上表中的eq是=的意思。</p>
<p>一个简单查询示例</p>
<p>http://localhost:8080/common/standard/sql/selectOneTable?from=cc_base_sql</p>
<p>这里省略了其他所有的东西，仅仅给您来了一个全表查询，用from字段指定了要查询cc_base_sql表。系统为你自动生成的sql</p>
<p>是<strong>SELECT * FROM cc_base_sql</strong></p>
<p>如果您仅仅要查询sql_code,sql_type两个字段，可以这样写：</p>
<p>http://localhost:8080/common/standard/sql/selectOneTable?select=sql_code,sql_type&amp;from=cc_base_sql</p>
<p>系统为您生成的sql是<strong>SELECT sql_code, sql_type FROM cc_base_sql</strong></p>
<p>如果您要指定查询sql_code为exampleSql4的数据，您有两种写法</p>
<p>http://localhost:8080/common/standard/sql/selectOneTable?from=cc_base_sql&amp;sql_code=exampleSql4</p>
<p>或</p>
<p>http://localhost:8080/common/standard/sql/selectOneTable?from=cc_base_sql&amp;where0=sql_code,eq,exampleSql4</p>
<p>系统为你自动生成的sql是:</p>
<p><strong>SELECT * FROM cc_base_sql WHERE cc_base_sql.sql_code = 'exampleSql4'</strong></p>
<p>第一种方法是fieldName=fieldValue的格式，因为您已经通过from条件把表名指定了，框架读取表的元数据，是可以识别出这个sql_code=exampleSql4的条件的。第二种方法，是解析出来的where0=sql_code,eq,exampleSql4被解析成sql_code=exampleSql4，如果您熟悉shell脚本，应该知道eq(=),gt(&gt;),lt(&lt;),le(&lt;=),ge(&gt;=)的意思。</p>
<h4 id="23-wherehaving">2.3 where和having语句的语法</h4>
<p>where和having都是做过滤的，语法是一致的，在url中的语法为</p>
<pre><code>where[0-9]*=fieldName,operator,params

having[0-9]*=fieldName,operator,params
</code></pre>
<p>其中fieldName是表中的字段名，比如cc_base_sql.sql_code。</p>
<p>operator是运算符，params 是operator的参数</p>
<p>示例:</p>
<pre><code>where0=sql_code,eq,exampleSql4
</code></pre>
<p>where后面加数字(where0,where1,where2,where3...)表示这是一个where条件，sql_code是表中的字段名，eq是运算符operator，exampleSql4是operator的参数，这句话的意思是有一个where条件是sql_code=exampleSql4。</p>
<p>运算符有如下</p>
<table>
<thead>
<tr>
<th>运算符(operator)</th>
<th>注释</th>
<th>参数值（params）</th>
<th>示例</th>
<th>示例含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>eq</td>
<td>EqualsTo,和sql语句中的=对应</td>
<td>1个具体的值，比如5</td>
<td>where1=id,eq,5</td>
<td>id=5</td>
</tr>
<tr>
<td>_eq</td>
<td>NotEqualsTo,和sql语句中的&lt;&gt;对应</td>
<td>1个具体的值，比如5</td>
<td>where1=id,_eq,5</td>
<td>id!=5</td>
</tr>
<tr>
<td>gt</td>
<td>GreaterThan,和sql语句中的&gt;对应</td>
<td>1个具体的值，比如5</td>
<td>where1=id,gt,5</td>
<td>id&gt;5</td>
</tr>
<tr>
<td>ge</td>
<td>GreaterThanEquals,和sql语句中的&gt;=对应</td>
<td>1个具体的值，比如5</td>
<td>where1=id,ge,5</td>
<td>id&gt;=5</td>
</tr>
<tr>
<td>lt</td>
<td>LessThan,和sql语句中的&lt;对应</td>
<td>1个具体的值，比如5</td>
<td>where1=id,lt,5</td>
<td>id&lt;5</td>
</tr>
<tr>
<td>le</td>
<td>LessThanEquals,和sql语句中的&lt;=对应</td>
<td>1个具体的值，比如5</td>
<td>where1=id,le,5</td>
<td>id&lt;=5</td>
</tr>
<tr>
<td>bt</td>
<td>Between,和sql语句中的Between...And对应</td>
<td>2个具体的值，比如5,10</td>
<td>where1=id,bt,5,10</td>
<td>id between 5 and 10</td>
</tr>
<tr>
<td>_bt</td>
<td>NotBetween,和sql语句中的Not Between...And对应</td>
<td>2个具体的值，比如5,10</td>
<td>where1=id,_bt,5,10</td>
<td>id not between 5 and 10</td>
</tr>
<tr>
<td>in</td>
<td>in,和sql语句中的in对应</td>
<td>多个具体的值，比如5,6,9,10</td>
<td>where1=id,in,5,6,9,10</td>
<td>id in (5,6,9,10)</td>
</tr>
<tr>
<td>_in</td>
<td>NotIn,和sql语句中的not in对应</td>
<td>多个具体的值，比如5,6,9,10</td>
<td>where1=id,_in,5,6,9,10</td>
<td>id not in (5,6,9,10)</td>
</tr>
<tr>
<td>nl</td>
<td>IsNull,和sql语句中的is null对应</td>
<td>没有params</td>
<td>where1=identifier,nl</td>
<td>identifier is null</td>
</tr>
<tr>
<td>_nl</td>
<td>IsNotNull,和sql语句中的is not null对应</td>
<td>没有params</td>
<td>where1=identifier,_nl</td>
<td>identifier is not null</td>
</tr>
<tr>
<td>lk</td>
<td>like,和sql语句中的like对应</td>
<td>一个具体的数值，比如exam*，其中的符号雪花表示%</td>
<td>where1=sql_code,lk,exam*</td>
<td>sql_code like 'exam%'</td>
</tr>
<tr>
<td>_lk</td>
<td>like,和sql语句中的not like对应</td>
<td>一个具体的数值，比如exam*，其中的符号雪花表示%</td>
<td>where1=sql_code,_lk,exam*</td>
<td>sql_code not like 'exam%'</td>
</tr>
</tbody>
</table>
<h3 id="3sql">3.自动生成sql 的多表查询</h3>
<h4 id="31">3.1请求路径</h4>
<pre><code>/common/standard/sql/commonSelect
</code></pre>
<h4 id="32">3.2请求说明</h4>
<pre><code>public static final String[] innerJoin = new String[]{&quot;innerJoin&quot;, &quot;join&quot;}; //sql语句的inner join关键字
public static final String[] leftJoin = new String[]{&quot;leftJoin&quot;}; //sql语句的left join关键字
public static final String[] rightJoin = new String[]{&quot;rightJoin&quot;};//sql语句的right join关键字
public static final String[] fullJoin = new String[]{&quot;fullJoin&quot;};//sql语句的full join关键字
</code></pre>
<p>GET请求。</p>
<p>语法和单表查询一致，</p>
<pre><code>/common/standard/sql/commonSelect?select=...&amp;from=...&amp;innerJoin|leftJoin|rightJoin|fullJoin=...&amp;where=...&amp;groupBy=...&amp;having=...&amp;orderBy=...&amp;fieldName1=fieldValue1&amp;fieldName2=fieldValue2
</code></pre>
<p>增加了如下4个请求字段</p>
<table>
<thead>
<tr>
<th>请求字段</th>
<th>说明</th>
<th>参数值</th>
<th>示例</th>
<th>示例含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>innerJoin</td>
<td>与sql语句中 inner join对应，是驼峰写法</td>
<td>表名,字段1,字段2</td>
<td>cc_base_sql,innerJoin=cc_base_sql_series.sql_code,cc_base_sql.sql_code</td>
<td>inner join cc_base_sql on  ...</td>
</tr>
<tr>
<td>leftJoin</td>
<td>与sql语句中 left join对应，是驼峰写法</td>
<td>表名,字段1,字段2</td>
<td>cc_base_sql,leftJoin=cc_base_sql_series.sql_code,cc_base_sql.sql_code</td>
<td>left join cc_base_sql on  ...</td>
</tr>
<tr>
<td>rightJoin</td>
<td>与sql语句中 right join对应，是驼峰写法</td>
<td>表名,字段1,字段2</td>
<td>cc_base_sql,rightJoin=cc_base_sql_series.sql_code,cc_base_sql.sql_code</td>
<td>right join cc_base_sql on  ...</td>
</tr>
<tr>
<td>fullJoin</td>
<td>与sql语句中 full join对应，是驼峰写法</td>
<td>表名,字段1,字段2</td>
<td>cc_base_sql,fullJoin=cc_base_sql_series.sql_code,cc_base_sql.sql_code</td>
<td>full join cc_base_sql on  ...</td>
</tr>
</tbody>
</table>
<p>参数值中的表名是join的表名，字段1,字段2是join的条件,可以有多个join条件，比如说:表名,字段1,字段2,字段3，字段4...</p>
<p>示例：</p>
<p>http://localhost:8080/common/standard/sql/commonSelect?from=cc_base_sql_series&amp;rightJoin=cc_base_sql,cc_base_sql_series.sql_code,cc_base_sql.sql_code</p>
<p>上述sql里from=cc_base_sql_series，生命了查询的主表是cc_base_sql_series，这个表right join 了 cc_base_sql 表，join条件是cc_base_sql_series.sql_code=cc_base_sql.sql_code，通过查看控制台，最终的对应的系统为您生成的sql是</p>
<pre><code class="language-sql">SELECT * FROM cc_base_sql_series RIGHT JOIN cc_base_sql ON cc_base_sql_series.sql_code = cc_base_sql.sql_code
</code></pre>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="页脚" >
      
        
        <a href="../install/" class="md-footer__link md-footer__link--prev" aria-label="上一页: Install" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                上一页
              </span>
              Install
            </div>
          </div>
        </a>
      
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 IoTMARS.COM
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\s\\-\uff0c\u3002]+", "search.placeholder": "\u641c\u7d22", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version.title": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../assets/javascripts/bundle.d6c3db9e.min.js"></script>
      
    
  </body>
</html>